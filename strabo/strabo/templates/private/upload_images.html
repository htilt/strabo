{% extends "/private/base.html" %}
{% set active_page = "upload_images" %}
{% block head %}
    {{ super() }}
    <link rel="stylesheet" type="text/css" href="/static/private_styles/upload_tool.css">
{% endblock %}

{% block content %}
<main class="container">

  <div id="form-wrapper">
    {% include "private/form_images.html" %}
  </div>

  <p></p>
  <p></p>
  <div class="table">
    <table class="table-bordered" margin="10px" id="preview">
      <tr>
        <th>Thumbnail</th>
        <th>Title</th>
        <th>Image Description</th>
        <th>Creation Date/Time</th> 
        <th>Latitude</th>
        <th>Longitude</th>
        <th>Period</th>
        <th>Interest Point</th>
        <th>Notes</th>
        <th>Filename</th>
      </tr>

      {% for key in images %}
      <tr>
        <td><img src="/static/test_thumbnails/{{ key['thumbnail_name'] }}" alt="thumbnail" style="width:100px;height:100px;"></img></td>
        <td class="image_title">{{ key['title'] | default("Untitled") }}</td>
        <td class="img_description">{{ key['img_description'] }}</td>
        <td class="created_at">{{ key['created_at'] }}</td> 
        <td class="latitude">{{ key['latitude'] }}</td>
        <td class="longitude">{{ key['longitude'] }}</td>
        <td class="period">{{ key['period'] }}</td>
        <td class="interest_point">{{ key['interest_point'] }}</td>
        <td class="notes">{{ key['notes'] }}</td>
        <td class="file_name">{{ key['filename'] }}</td>
      </tr>
      {% endfor %}
    </table>
  </div>
</main>
{% endblock %}

{% block footer %}
    {{ super () }}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="/static/js/exif.js"></script>
    <script type="text/javascript" src="/static/js/get_tags.js"></script>
    <script type="text/javascript">
      function readURL(input) {
        if (input.files && input.files[0]) {
          var reader = new FileReader();
          reader.onload = function (e) {
            $('#img-preview').attr('src', e.target.result);
          }
          reader.readAsDataURL(input.files[0]);
         }
      }
      $("#img-input").change(function(){
        readURL(this);
      });
    </script>
{% endblock %}